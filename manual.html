<!DOCTYPE html>
<html lang="en">
<head>
	<title>JSForth User's Manual</title>
	<link rel="shortcut icon" href="forth.png" />
	<style>
	pre {background:#DDD;padding:2px;}
	code {background:#DDD;}
	header {display:flex;}
	.logo {width: auto;height:64px;}
	</style>
</head>
<body>
	<header>
		<img src="forth.png" alt="" class="logo" />
		<h1>JSForth User's Manual</title>
	</header>
	<nav>
		<h1>Contents</h1>
		<ol>
			<li>
				<a href="#intro">Overview</a>
				<ol>
					<li><a href="#noobz">For beginners</a></li>
					<li><a href="#pros">For experienced programmers</a></li>
					<li><a href="#roadmap">Roadmap to version 1.0</a></li>
				</ol>
			</li><li>
				<a href="#words">Supported standard Forth words</a>
				<ul>
					<li><a href="#leftParen">(</a></li>
					<li><a href="#comment">\</a></li>
					<li><a href="#plus">+</a></li>
					<li><a href="#minus">-</a></li>
					<li><a href="#times">*</a></li>
					<li><a href="#slash">/</a></li>
					<li><a href="#mod">MOD</a></li>
					<li><a href="#gt">></a></li>
					<li><a href="#lt"><</a></li>
					<li><a href="#equals">=</a></li>
				<!-- TO BE DOCUMENTED
				<= >= <> 0= 0< 1+ 1- lshift rshift and or xor . .s emit @ !
				abs dup swap rot pick roll drop over invert
				if ... then do ... loop : ;
				

				See https://forth-standard.org/standard/core
				for words to be added :)
				-->
				</ul>
			</li>
			<li>
				<a href="#JSForthWords">JSForth-specific words</a>
				<ul>
					<li><a href="#pow">^</a></li>
					<li><a href="#clear">CLEAR</a></li>
					<li><a href="#cls">CLS</a></li>
					<li><a href="#debug">DEBUG</a></li>
					<li><a href="#js">JS</a></li>
					<li><a href="#prompt">PROMPT</a></li>
				</ul>
			</li>
		</ol>
	</nav>
	<main>
		<h1 id="intro">Overview</h1>
		<h2 id="noobz">For beginners</h2>
		<p>
			This is a Forth implementation in Javascript, with a REPL using <a href="https://xtermjs.org/" target="_blank">xterm.js</a>.
			It started out as a student's college assignment, but it has the potential to be something much cooler and more useful.
			For more info on Forth, see <a href=https://www.forth.com/starting-forth/">Starting FORTH</a>, one of the best tutorials
			- on any language - I've ever seen (and I've been coding for 10+ years so I've seen a lot, lol).  Forth is a stack-based
			language, low-level in some ways and yet high-level in others.  The best (or at least funniest) description I ever read is
			in <a href="https://hackaday.com/2017/01/27/forth-the-hackers-language/" target="_blank">this article</a>: "Forth is what
			youâ€™d get if Python slept with Assembly Language: interactive, expressive, and without syntactical baggage, but still very
			close to the metal. Is it a high-level language or a low-level language? Yes! Or rather, itâ€™s the shortest path from one to
			the other."  So true! ðŸ¤£
		</p>
		<h2 id="pros">For experienced programmers</h2>
		<p>
			All joking aside, the simplicity and power of Forth is hard to ignore.  It's as old as C, maybe older, and yet (like C) is
			still very relevant in this decade.  Of course we retro-lovers can use it on 8-bit computers, but it's not just a "toy" like
			8-bit BASICs.  It's used in embedded systems, and (strange but awesome) in outer-space-related code!  Or so they say on the
			interwebz.  I've also seen very polished, proprietary Forths for desktop and mobile devices, complete with words that call
			native APIs and all the bells and whistles a programmer could possibly want.  Some examples include
			<a href="https://8th-dev.com/" target="_blank">8th</a> and <a href="https://www.forth.com/swiftforth/" target="_blank">SwiftForth</a>
			(I haven't used either, but I like the sound of 8th especially).  But those aren't freed software.  So, the FOSS community
			created <a href="https://gforth.org/" target="_blank">Gforth</a>, <a href="https://github.com/philburk/pforth/" target="_blank">Pforth</a>,
			and many, many more.  But surprisingly, there doesn't seem to have been any serious-ish attempt at a Forth for the web.
		</p>
		<h2 id="roadmap">Roadmap to version 1.0</h2>
		<p>
			No two Forth variants are exactly the same.  There are differences between Gforth and SwiftForth, 8th and Pforth, etc. to say nothing of all
			the embedded and retro Forths out there.  Even with the same code base, Gforth for MS-DOS is not going to be the same as Gforth for Linux.
			A <a href="https://forth-standard.org/" target="_blank">standard</a> does exist, but there's a saying that "If you've seen one Forth... you've
			seen one Forth."  This makes sense, because every time someone builds a Forth, they usually have some specialized functionality in mind that
			is not possible anywhere else.  So while I do hope to include a <em>TON</em> of the standard words, this Forth isn't going to be "compliant"
			with any super-strict standards.  But frankly, even languages that have hard-and-fast standards are not "set in stone".  Like C - it all depends
			on the compiler.  Or Python (who's still Netflix'n'chilling with Assembly ðŸ¤£) or PHP or even Java - it's all about the interpreter/runtime.  So,
			JSForth will try to be predictable for people who know Forth well... but we're not gonna stress the standards.
		</p><p>
			Instead, allow me to share my vision for this Forth.  Put simply, all the best parts of Forth, plus all the best parts of the web.  Like what if
			you could do something like this:
			<pre>\ Easily set up a canvas, include remote code using AJAX/Fetch, play audio, read a game controller and 
include "http://mywebsite.com/game.fs"
key s" theme.ogg" play
canvas-on black fill s" Mario.png" draw-image
start-game

\ Or, how about a little DOM stuff
include html5.fs    \ from localStorage
s" h1" createElement dup s" test" css-class
dup docBody append dup s" Heading text here" innerText

\ Or, working with localStorage, web APIs, JSON etc... Maybe not the best idea,
\ but should be easily doable cuz Forth rocks and a JS Forth should be able to do that.</pre>
		</p>
		<h1 id="words">Supported standard Forth words</h1>
		<p>Note that in this manual, I'm using uppercase just out of convention.  The Forth standard does it, all the tutorials I've seen do it, so it made sense to do that here too.  But don't worry - none of these words are case-sensitive (so dup, DUP and Dup all do the same thing).</p>
		<h2 id="leftParen">(</h2>
		<p>Starts a comment.  For example:</p>
		<pre>: doop ( more phonetically correct) dup ;</pre>
		<p>In this goofy and kind of pointless example, created a new word "doop" that just runs "dup".  But I explained why in a comment.  Note that, like in nearly all Forths, there has to be a space after the "(" character for this to work.  Doing this has no effect on the stack, so it's a nice way to add comments in your code.</p>
		<p>In fact, the Forth community has kind of adopted this type of comment as a way to tell us what a word does to the stack.  If I wanted to do that with my dopey doop example, my code might look something like this:</p>
		<pre>: doop ( number -- number numberAgain ) dup ;</pre>
		<p>There's also a form of shorthand that's probably in the standard by now, like using "n" instead of "number", but that is beyond the scope of this manual.</p>
		<h2 id="comment">\</h2>
		<p>This is another way to write a comment.  The difference here is that you don't have to "close it".  This is like "//" or "#" in other languages.  For example:</p>
		<pre>: one year 60 24 * 365 * ;    \ 60 minutes * 24 hours * 365 days</pre>
		<h2 id="plus">+</h2>
		<p>Pops the top two numbers off the stack, adds them, and pushes the result onto the stack.  For example:</p>
		<pre>3 4 +     \ Displays: Nothing; Stack: 7</pre>
		<h2 id="minus">-</h2>
		<p>Pops the top two numbers off the stack, subtracts the second from the first, and pushes the result onto the stack.  For example:</p>
		<pre>10 2 -    \ Displays: Nothing; Stack: 8</pre>
		<h2 id="times">*</h2>
		<p>Pops the top two numbers off the stack, multiplies them, and pushes the result onto the stack.  For example:</p>
		<pre>5 8 *     \ Displays: Nothing; Stack: 40</pre>
		<h2 id="slash">/</h2>
		<p>Pops the top two numbers off the stack, divides the second by the first, and pushes the result onto the stack.  A few important notes here:</p>
		<ul>
			<li>This is whole-number ("integer") division; there are no decimal places in the result.</li>
			<li>Trying to divide by zero will show an error.</li>
		</ul>
		<p>For example:</p>
		<pre>10 2 /     \ Displays: Nothing; Stack: 5</pre>
		<h2 id="mod">MOD</h2>
		<p>Pops the top two numbers off the stack, divides the second by the first, and pushes the remainder (die-hard Roman math lovers call this "Modulus" and/or "Modulo" - sorry, I don't have any Roman buddies to confirm the exact usage, so I'm calling it "remainder") onto the stack.  Note that just like with <code>/</code>:</p>
		<ul>
			<li>This is whole-number ("integer") division; there are no decimal places in the result.</li>
			<li>Trying to divide by zero will show an error.</li>
		</ul>
		<p>For example:</p>
		<pre>10 3 MOD     \ Displays: Nothing; Stack: 1</pre>
		<h2 id="gt">></h2>
		<p>Pops the top two numbers off the stack, and pushes -1 on the stack if the first number is greater, or 0 if not.  For example:</p>
		<pre>10 12 > .     \ Displays 0 because 10 is not greater than 12
10 6 > .      \ Displays -1 because 10 is greater than 6</pre>
		<h2 id="lt"><</h2>
		<p>Pops the top two numbers off the stack, and pushes -1 on the stack if the first number is less, or 0 if not.  For example:</p>
		<pre>7 5 < .     \ Displays 0 because 7 is not less than 5
		7 10 < .    \ Displays -1 because 7 is less than 10</pre>
		<h2 id="equals">=</h2>
		<p>Pops the top two numbers off the stack, and pushes -1 on the stack if they are the same, or 0 if not.  For example:</p>
		<pre>7 7 = .           \ Displays -1 because 7 = 7
7 123 = .         \ Displays 0 because 7 is not 123 (lol)</pre>


		<h1 id="JSForthWords">JSForth-specific words</h1>
		<h2 id="pow">^</h2>
		<p>This calculates exponents.  For example:</p>
		<code>
		2 2 * 2 * .    \ 2 * 2 * 2 = 8.  OR you could do...
		2 3 ^ .        \ 2 to the third power = 8
		</code>
		<h2 id="clear">CLEAR</h2>
		<p>Clears the stack, mo matter how many nnumbers are on it.  For example:</p>
		<code>
		1 2 3 4 .S     \ This would print the stack, which would contain numbers 1-4
		CLEAR .S       \ Again, .S would print the stack, but the stack is now empty.
		</code>
		<h2 id="cls">CLS</h2>
		<p>Clears the terminal screen.  This has no stack effects.</p>
		<h2 id="debug">DEBUG</h2>
		<p>Turns debug mode on or off.  WHen debug mode is on, JSForth will log what it's doing to the JS console (in the browser developer tools)</p>
		<h2 id="js">JS</h2>
		<p>Runs JavaScript code.  This word expects two numbers to be on the stack: the topmost being the length of the string and the next being a pointer to the string in memory.  For example:
		<pre>S" alert('Check it out!');" js</pre>
		<p>When you run <code>S"</code>, the two numbers I just listed are pushed onto the stack.  Then JSForth sees the word <code>JS</code> and evaluates that astring as JavaScript.  If there's an error, it'll show up in the terminal.</p>
		<h2 id="prompt">PROMPT</h2>
		<p>Changes the prompt (the ">>>") to something else.  For example:</p>
		<pre>10 0 ! 13 1 ! 0 2 prompt</pre>
		<p>The end result is that there is no prompt.  This is actually my preference, since most of the Forths I use don't have a prompt.  But you can set it to whatever you like.  Here's how that works:</p>
		<ol>
			<li><code>10 0 !</code> puts the number 10 (a carriage return or <code>\r</code>) into memory address #0</li>
			<li><code>13 1 !</code> puts the number 13 (a line feed or <code>\n</code>) into memory address #1</li>
			<li><code>0 2 prompt</code> tells JSForth to use memory address #0 (which now contains <code>\r\n</code>) as the new prompt.</li>
		</ol>
		<p>However, there is a simpler way, using the <code>JS</code> word.  That would be by setting the <code>FORTH_PROMPT</code> JS variable.  Here's how to do that:</p>
		<pre>s" FORTH_PROMPT = '\r\nGo: ';" js</pre>
		<p>Either way, you can do all kinds of cool things for the prompt using ANSI escape codes.</p>
		<!--
		ALLOCATE ROWS COLS
		Words I'd like to add:
			INCLUDE (from localStorage)
			SAVE (to localStorage)
			FETCH (for communicating with external servers)
			Words for canvas, audio, maybe DOM, etc.
		-->
	</main>
</body>
</html>
